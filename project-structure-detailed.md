# Структура проекта EMD.EDUCATION KINO AI

## Обзор проекта

EMD.EDUCATION KINO AI - образовательный ресурс по использованию искусственного интеллекта в кинематографе. Проект представляет собой веб-приложение, разработанное с использованием React, TypeScript и Vite, с интеграцией облачного хранилища Supabase для хранения данных и медиафайлов.

## Технологический стек

### Основные технологии
- **React 18.3.1** - библиотека для создания пользовательских интерфейсов
- **TypeScript** - типизированный JavaScript
- **Vite** - инструмент сборки и разработки
- **Tailwind CSS** - утилитарный CSS-фреймворк
- **Supabase** - облачная платформа для хранения данных и файлов

### Зависимости
- `@supabase/supabase-js` (v2.52.0) - клиент Supabase для JavaScript
- `@tanstack/react-query` (v5.83.0) - библиотека для управления состоянием и кешированием данных
- `lucide-react` (v0.344.0) - набор иконок для React
- `uuid` (v11.1.0) - генерация уникальных идентификаторов

## Структура файлов и директорий

```
emd-education-kino-ai/
├── src/                      # Исходный код приложения
│   ├── components/           # React компоненты
│   │   ├── AdminPanel.tsx    # Панель администратора
│   │   ├── AuthModal.tsx     # Модальное окно авторизации
│   │   ├── Header.tsx        # Шапка сайта
│   │   ├── Hero.tsx          # Главный баннер
│   │   ├── MediaSection.tsx  # Секция с медиа-контентом
│   │   ├── MigrationTool.tsx # Инструмент миграции данных
│   │   ├── SpeakersSection.tsx # Секция со спикерами
│   │   └── SurveySection.tsx # Секция с опросом
│   ├── hooks/                # Пользовательские хуки
│   │   ├── useAuth.ts        # Хук для авторизации
│   │   ├── useLocalStorage.ts # Хук для работы с локальным хранилищем
│   │   └── useStorage.ts     # Хук для работы с Supabase Storage
│   ├── lib/                  # Библиотеки и утилиты
│   │   └── supabase.ts       # Конфигурация клиента Supabase
│   ├── types/                # Типы TypeScript
│   │   └── index.ts          # Основные типы данных
│   ├── utils/                # Утилиты
│   │   ├── initSupabase.ts   # Инициализация Supabase
│   │   ├── migrateData.ts    # Функции миграции данных
│   │   └── migrationUtils.ts # Вспомогательные функции для миграции
│   ├── App.tsx               # Корневой компонент приложения
│   ├── index.css             # Глобальные стили
│   ├── main.tsx              # Точка входа приложения
│   └── vite-env.d.ts         # Типы для Vite
├── public/                   # Статические файлы
├── index.html                # Главный HTML файл
├── package.json              # Зависимости и скрипты
├── postcss.config.js         # Конфигурация PostCSS
├── tailwind.config.js        # Конфигурация Tailwind CSS
├── tsconfig.json             # Конфигурация TypeScript
├── vite.config.ts            # Конфигурация Vite
└── README.md                 # Документация проекта
```

## Основные компоненты и их взаимодействие

### Компоненты пользовательского интерфейса

1. **App.tsx**
   - Корневой компонент приложения
   - Управляет состоянием авторизации и отображением админ-панели
   - Содержит основную структуру приложения

2. **Header.tsx**
   - Шапка сайта с логотипом и навигацией
   - Содержит кнопку для доступа к админ-панели

3. **Hero.tsx**
   - Главный баннер с заголовком и описанием проекта

4. **MediaSection.tsx**
   - Отображает медиа-контент (фото, видео, презентации)
   - Использует данные из Supabase Storage

5. **SpeakersSection.tsx**
   - Отображает информацию о спикерах
   - Загружает данные из Supabase

6. **SurveySection.tsx**
   - Форма опроса для пользователей
   - Сохраняет ответы в таблицу survey_responses в Supabase

7. **AdminPanel.tsx**
   - Панель управления для администраторов
   - Позволяет управлять медиа-контентом, спикерами и просматривать ответы на опросы
   - Имеет функции синхронизации данных с Supabase

8. **AuthModal.tsx**
   - Модальное окно для авторизации в админ-панель
   - Проверяет учетные данные пользователя

9. **MigrationTool.tsx**
   - Инструмент для миграции данных из локального хранилища в Supabase

### Хуки и утилиты

1. **useAuth.ts**
   - Управление состоянием авторизации
   - Функции входа и выхода из системы

2. **useLocalStorage.ts**
   - Работа с локальным хранилищем браузера
   - Сохранение и получение данных

3. **useStorage.ts**
   - Взаимодействие с Supabase Storage и базой данных
   - Функции для загрузки, удаления и получения файлов
   - Функции для работы с таблицами speakers и survey_responses

4. **supabase.ts**
   - Инициализация клиента Supabase
   - Конфигурация с использованием переменных окружения

5. **migrateData.ts** и **migrationUtils.ts**
   - Функции для миграции данных из локального хранилища в Supabase
   - Вспомогательные утилиты для процесса миграции

## Интеграция с Supabase

### Хранилище данных

1. **Таблицы в базе данных**
   - `speakers` - информация о спикерах
   - `survey_responses` - ответы на опросы

2. **Бакеты в Supabase Storage**
   - `photos` - фотографии
   - `videos` - видеоматериалы
   - `presentations` - презентации
   - `speakers` - фотографии спикеров

### Политики безопасности

- Настроены политики Row Level Security (RLS) для таблиц
- Публичный доступ на чтение для всех бакетов
- Авторизованный доступ на запись

## Процесс разработки

### Скрипты

- `npm run dev` - запуск сервера разработки
- `npm run build` - сборка проекта для продакшена
- `npm run lint` - проверка кода с помощью ESLint
- `npm run preview` - предварительный просмотр собранного проекта

### Переменные окружения

Для работы с Supabase требуются следующие переменные окружения:
- `VITE_SUPABASE_URL` - URL проекта Supabase
- `VITE_SUPABASE_ANON_KEY` - анонимный ключ API Supabase

## Особенности реализации

1. **Синхронизация данных**
   - Периодическое обновление данных в админ-панели каждые 30 секунд
   - Безусловное обновление состояния из базы данных для обеспечения синхронизации между браузерами

2. **Авторизация**
   - Простая авторизация по логину и паролю для доступа к админ-панели
   - Защита админ-функций от неавторизованного доступа

3. **Работа с медиафайлами**
   - Загрузка файлов в Supabase Storage
   - Получение публичных URL для отображения медиафайлов

4. **Обработка форм**
   - Валидация данных перед отправкой
   - Сохранение ответов на опросы в базу данных

## Дальнейшее развитие

1. Улучшение пользовательского интерфейса и опыта
2. Расширение функциональности админ-панели
3. Добавление аналитики и статистики по ответам на опросы
4. Оптимизация производительности и загрузки медиафайлов
